apiVersion: '2019-12-01'
location: francecentral
name: cinapps
properties:
  containers:
    - name: cron
      properties:
        image: melobgn/cron  # Remplace <image_cron_job> par l'image de ton cron job
        resources:
          requests:
            cpu: 0.5  # Ajuste les ressources CPU selon les besoins de ton cron job
            memoryInGb: 0.5  # Ajuste la m√©moire selon les besoins de ton cron job
        environmentVariables:
          - name: AZURE_DB_CONNECTION_STRING
            value: "user=Spies;password=Simplon1948;host=dbcinapps.mysql.database.azure.com;port=3306;database=dbcinapps;ssl_ca=$(cat cinapps/.env | grep SSL_CA_CONTENT | cut -d'=' -f2);ssl_disabled=False"

    - name: web
      properties:
        image: melobgn/django_cinapps
        resources:
          requests:
            cpu: 1
            memoryInGb: 1.5
        ports:
          - port: 8006
        environmentVariables:
          - name: SECRET_KEY
            # value: ldhsercwnx7+w=fs@m!o#h$m)lkyme0!5h$=$wq-1*vmz!^s
          - name: URL_API
            value: http://localhost:8002/predict
          - name: DEBUG
            value: "0"
          - name: AZURE_DB_CONNECTION_STRING
            value: "user=Spies;password=Simplon1948;host=dbcinapps.mysql.database.azure.com;port=3306;database=dbcinapps;ssl_ca=$(cat cinapps/.env | grep SSL_CA_CONTENT | cut -d'=' -f2);ssl_disabled=False"
          - name: SENDGRID_API_KEY
            value: ----

    - name: api
      properties:
        image: melobgn/api_cinapps
        resources:
          requests:
            cpu: 2
            memoryInGb: 1.5
        ports:
          - port: 8002

  osType: Linux
  ipAddress:
    type: Public
    ports:
      - protocol: tcp
        port: 8001  # Adapter en fonction des besoins de votre application

tags: null
type: Microsoft.ContainerInstance/containerGroups